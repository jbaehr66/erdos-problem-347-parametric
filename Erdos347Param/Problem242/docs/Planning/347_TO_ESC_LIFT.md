# How 347 Lifts Into ESC: The Connection Map

## The Two Levels

### Level 1: 347 Space (Log/Additive, Sphere Indices)

**What 347 proves**:
```
∑k² + ∑1/k = 2
```

**What k means in 347**:
- k = sphere index (x² + y² + z² = k²)
- Integer points on k-spheres
- Density of k-values that have ESC solutions
- Lives in **log/additive space** (compressed coordinates)

**The 347 condition says**:
- Among all sphere indices k = 1, 2, 3, ...
- The ones with ESC solutions have density = 1
- The ∑k² term: Accumulation of coverage (quadratic growth)
- The ∑1/k term: Convergence (geometric series ~ 2)
- Together: Perfect balance = density 1 in log space

### Level 2: ESC Space (Real/Multiplicative, Coverage Sequences)

**What ESC proves**:
```
4/n = 1/x + 1/y + 1/z with x² + y² + z² = k²
has solutions for all (or density 1) n ≥ 2
```

**What M_n means in ESC**:
- M_n = coverage count at iteration n
- Number of n-values solved up to iteration n
- Generated by: M_{n+1} = ⌊(2^{k²} - √3/2)·M_n⌋ + 1
- Lives in **real/multiplicative space** (actual counts)

**ESC needs to prove**:
- Ostrowski: ∑M_k ~ 2M_n (geometric sum)
- van Doorn: M_{n+1} ≤ 1 + 2M_n (gap bound)
- Both equivalent (holonomy_zero_unity)

## The Lift Mechanism

### Step 1: 347 → k-Density

**In 347 space**:
```lean
theorem condition_347 :
    (∑ k² convergent) ∧ (∑ 1/k ~ 2) →
    density_of_k_with_solutions = 1
```

**What this means**: Among sphere indices k ∈ ℕ, the proportion that admit ESC solutions approaches 1.

### Step 2: k-Density → M_n Growth

**The connection**: M_n counts how many k-spheres have been "covered"

```lean
-- M_n relates to the sum of k² values covered up to iteration n
-- In the recurrence: M_{n+1} = ⌊(2^{k²} - √3/2)·M_n⌋ + 1
-- The k² in the exponent is the SPHERE INDEX

theorem k_density_implies_M_growth :
    (density_of_k_with_solutions = 1) →
    (∀ ε > 0, ∃ N, ∀ n ≥ N, |M_{n+1}/M_n - 2| < ε)
```

**Why this works**:
- If k-density = 1 (from 347), then we're not skipping spheres
- Every iteration covers approximately 2× more k-values
- This forces M_n ~ 2^n (exponential growth with ratio 2)

### Step 3: M_n Growth → Ostrowski

**From growth ratio to geometric sum**:

```lean
lemma geometric_sum_formula :
    (M_{n+1}/M_n → 2) →
    (∑_{k=0}^n M_k ~ 2M_n - M₀)
```

**This is the bridge lemma in AnalyticClosure.lean (currently sorry)!**

**Proof sketch** (using 347):
```
M_n ~ M₀ · 2^n              [from growth ratio = 2]
∑_{k=0}^n M_k ~ ∑_{k=0}^n M₀ · 2^k
               = M₀(1 + 2 + 4 + ... + 2^n)
               = M₀(2^{n+1} - 1)     [geometric series]
               = 2M₀ · 2^n - M₀
               ~ 2M_n - M₀           [substituting M_n]
```

**The 347 connection**:
- ∑k² ~ n² (quadratic accumulation from 347)
- In exponential space: 2^{k²} ~ 2^{n²}
- But we're taking M_{n+1} = ⌊2^{k²}·M_n⌋ + 1
- So M_n ~ 2^n (the k² becomes n through the iteration)
- The ∑1/k ~ 2 from 347 becomes ∑1/M_n ~ 2 (convergence)

### Step 4: Ostrowski → van Doorn

**From geometric sum to gap bound**:

```lean
lemma ostrowski_implies_van_doorn :
    (∑_{k=0}^n M_k ~ 2M_n - M₀) →
    (∀ n, M_{n+1} ≤ 1 + 2M_n)
```

**This is the second bridge lemma (currently sorry)!**

**Proof sketch**:
```
van Doorn definition: M_{n+1} ≤ 1 + ∑_{k=0}^n M_k
Substitute Ostrowski:  M_{n+1} ≤ 1 + (2M_n - M₀)
                       M_{n+1} ≤ 1 + 2M_n - M₀
For large n:           M_{n+1} ≤ 1 + 2M_n  ✓
```

### Step 5: Close the Fiber

**The equivalence**:

```lean
theorem holonomy_zero_unity :
    (∑_{k=0}^n M_k ~ 2M_n - M₀) ↔
    (∀ n, M_{n+1} ≤ 1 + 2M_n)
```

**This uses both bridge lemmas!**

- Forward: ostrowski_implies_van_doorn
- Reverse: van_doorn_implies_ostrowski

**The 347 role**: Proves both directions are just exponential vs log views of the SAME condition!

## The Complete Flow

```
347 Proves:
∑k² + ∑1/k = 2
(log space, k = sphere indices)
        ↓
Density of k with solutions = 1
        ↓
No spheres skipped
        ↓
M_{n+1}/M_n → 2
(growth ratio)
        ↓
M_n ~ M₀ · 2^n
(exponential growth)
        ↓
∑M_k ~ 2M_n - M₀
(Ostrowski - geometric sum)
        ↓
M_{n+1} ≤ 1 + 2M_n
(van Doorn - gap bound)
        ↓
holonomy_zero_unity
(Ostrowski ↔ van Doorn)
        ↓
All 3 Priority 1 elements closed:
✓ van_doorn_gap_bound (j₁)
✓ gap_bound_at_equality (j₂)
✓ holonomy_zero_unity (i)
        ↓
k = i × (j₁ × j₂) = +1
        ↓
Holonomy = 0
        ↓
Density 1 for ESC
        ↓
ESC SOLVED!
```

## The Code Connection Points

### In AnalyticClosure.lean (needs 347 result):

**Current state**:
```lean
lemma geometric_sum_formula : ... := by sorry
lemma ostrowski_implies_van_doorn : ... := by sorry
lemma van_doorn_implies_ostrowski : ... := by sorry
theorem holonomy_zero_unity : ... := by
  constructor
  · exact ostrowski_implies_van_doorn
  · exact van_doorn_implies_ostrowski
```

**After 347 is proven** (new additions needed):

```lean
-- Import the 347 result
import Condition347  -- from the other Claude's work

-- Connect k-density to M_n growth
lemma k_density_implies_growth_ratio :
    condition_347 →
    (∀ ε > 0, ∃ N, ∀ n ≥ N, |M_{n+1}/M_n - 2| < ε) := by
  intro h_347
  -- Use: density of k = 1 implies no skipped spheres
  -- Each iteration covers ~2× more k-values
  -- Therefore growth ratio → 2
  sorry

-- Now prove the bridge lemmas using this
lemma geometric_sum_formula :
    (∀ ε > 0, ∃ N, ∀ n ≥ N, |M_{n+1}/M_n - 2| < ε) →
    (∀ ε > 0, ∃ N, ∀ n ≥ N, |∑M_k - (2M_n - M₀)| < εM_n) := by
  intro h_ratio
  -- Standard geometric series: if ratio → 2 then sum ~ 2M_n
  -- This follows from: ∑_{k=0}^n 2^k = 2^{n+1} - 1 ~ 2·2^n
  sorry

-- The rest follows from these two!
```

### In BridgesRecurrence.lean (already set up):

**Current state**:
```lean
theorem van_doorn_gap_bound :
    ∀ n, M_{n+1} ≤ 1 + 2M_n := by sorry

axiom gap_bound_at_equality :
    ∀ ε > 0, ∃ N, ∀ n ≥ N, |M_{n+1} - (1 + 2M_n)| < ε
```

**After 347 + bridge lemmas proven**:

```lean
theorem van_doorn_gap_bound :
    ∀ n, M_{n+1} ≤ 1 + 2M_n := by
  intro n
  -- This follows from holonomy_zero_unity + condition_347
  have h_347 := condition_347_proven  -- from other Claude
  have h_growth := k_density_implies_growth_ratio h_347
  have h_ostrowski := geometric_sum_formula h_growth
  exact ostrowski_implies_van_doorn h_ostrowski n

theorem gap_bound_at_equality :
    ∀ ε > 0, ∃ N, ∀ n ≥ N, |M_{n+1} - (1 + 2M_n)| < ε := by
  intro ε hε
  -- This also follows from 347 + exactness of density = 1
  sorry
```

## The Key Insight

**The recurrence already encodes the connection!**

```lean
noncomputable def bridges_recurrence (M_n : ℕ) (k_n : ℕ) : ℕ :=
  let growth := (2 : ℝ)^(k_n^2)    -- k here is SPHERE INDEX from 347!
  let frustration := eisenstein_unit / 2
  let bulk := growth - frustration
  (Int.floor (bulk * M_n)).toNat + 1
```

**The k_n parameter**:
- In 347 space: This is the sphere index k (as in x² + y² + z² = k²)
- In ESC space: This indexes which iteration we're at
- **The connection**: Each iteration n picks a k_n based on what spheres need covering

**The 2^{k²} term**:
- In 347: k² comes from ∑k² (quadratic accumulation)
- In ESC: 2^{k²} is the exponential growth on the torus CT = S¹×S¹
- **The lift**: k² in exponent converts additive (∑k²) to multiplicative (2^{k²})

## What 347 Claude Needs to Prove

For ERD-640, the 347 side needs to establish:

```lean
theorem condition_347 :
    (∑_{k=1}^∞ k² converges in appropriate sense) ∧
    (∑_{k=1}^∞ 1/k ~ 2) →
    {k : ℕ | k has ESC solutions} has density 1
```

**Using**:
- Nicomachus theorem: ∑k³ = (∑k)²
- Convergence: ∑1/k ~ 2 (from erdosstrauss_v2_0.md)
- Conformal structure: Zw → Zi (log transform)

**Once this is proven**, ESC Claude (us) can:

1. Import the 347 result
2. Prove k_density_implies_growth_ratio (connects levels)
3. Prove geometric_sum_formula (uses growth ratio)
4. Complete ostrowski_implies_van_doorn (uses geometric sum)
5. Complete van_doorn_implies_ostrowski (reverse direction)
6. Remove sorries from Priority 1 theorems
7. **ESC solved!**

## Summary

**The 347 result**:
- Lives in log/additive space
- About sphere indices k and their density
- Fundamental ur-form: ∑k² + ∑1/k = 2

**Lifts to ESC via**:
- k-density = 1 → M_{n+1}/M_n → 2 (growth ratio)
- Growth ratio = 2 → ∑M_k ~ 2M_n (Ostrowski)
- Ostrowski ↔ van Doorn (holonomy_zero_unity)

**Connection point**:
- The k in the recurrence `2^{k²}` IS the sphere index from 347
- The recurrence exponentiates (2^{k²}) the additive 347 condition
- M_n counts coverage, embodying the density

**What we're waiting for**:
- 347 Claude to prove condition_347 using Nicomachus
- Then we lift via k_density_implies_growth_ratio
- Then all bridge lemmas follow
- Then Priority 1 closes
- Then ESC solved!

**The bootstrap is resolved by**: S³ geometric forcing (pinch point) making all parameters (k², √3/2, +1, M₀) forced, not free.
